@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   RESPONSIVE CSS CUSTOM PROPERTIES
   ============================================ */
@layer base {
  :root {
    /* 
      FLUID SPACING & TYPOGRAPHY SYSTEM
      Uses clamp(min, preferred, max) to interpolate values smoothly 
      between viewport widths of 320px (small mobile) and 1024px (desktop).
    */

    /* Spacing scale - Fluid */
    --space-xs: clamp(0.125rem, 0.5vw, 0.25rem);
    /* 2px -> 4px */
    --space-sm: clamp(0.375rem, 1vw + 0.1rem, 0.5rem);
    /* 6px -> 8px */
    --space-md: clamp(0.625rem, 1.5vw + 0.2rem, 1rem);
    /* 10px -> 16px */
    --space-lg: clamp(1rem, 2vw + 0.5rem, 1.5rem);
    /* 16px -> 24px */
    --space-xl: clamp(1.5rem, 3vw + 0.5rem, 2.5rem);
    /* 24px -> 40px */
    --space-2xl: clamp(2rem, 4vw + 1rem, 4rem);
    /* 32px -> 64px */

    /* Typography scale - Fluid */
    --text-xs: clamp(0.7rem, 0.8vw + 0.5rem, 0.8rem);
    /* ~11px -> ~12.8px */
    --text-sm: clamp(0.8rem, 0.9vw + 0.55rem, 0.925rem);
    /* ~12.8px -> ~14.8px */
    --text-base: clamp(0.9rem, 1vw + 0.6rem, 1rem);
    /* ~14.4px -> ~16px */
    --text-lg: clamp(1rem, 1.2vw + 0.7rem, 1.25rem);
    /* ~16px -> ~20px */
    --text-xl: clamp(1.25rem, 1.5vw + 0.8rem, 1.5rem);
    /* ~20px -> ~24px */
    --text-2xl: clamp(1.5rem, 2vw + 1rem, 1.875rem);
    /* ~24px -> ~30px */
    --text-3xl: clamp(1.75rem, 2.5vw + 1rem, 2.25rem);
    /* ~28px -> ~36px */

    /* Layout dimensions - Fluid */
    --sidebar-width: 0px;
    --header-height: clamp(3.5rem, 8vh, 4rem);
    --dock-height: clamp(5rem, 12vh, 6rem);
    --content-max-width: 100%;

    /* Card Styling - Fluid */
    --card-padding: clamp(0.75rem, 2vw + 0.25rem, 1.5rem);
    --border-radius-card: clamp(0.75rem, 2vw, 1.5rem);
  }

  /* Desktop Adjustments (Fixed layout shifts) */
  @media (min-width: 1024px) {
    :root {
      --sidebar-width: 16rem;
      --header-height: 5rem;
      --dock-height: 0px;
      --content-max-width: 64rem;
      --card-padding: 2rem;
    }
  }

  /* Desktop (1024px+) */
  @media (min-width: 1024px) {
    :root {
      --sidebar-width: 16rem;
      --header-height: 5rem;
      --dock-height: 0px;
      --space-lg: 2rem;
      --space-xl: 3rem;
      --space-2xl: 4rem;
      --text-lg: 1.25rem;
      --text-xl: 1.5rem;
      --text-2xl: 2rem;
      --text-3xl: 2.5rem;
      --content-max-width: 64rem;
      --card-padding: 2rem;
      --border-radius-card: 1.5rem;
    }
  }

  /* Large Desktop (1280px+) */
  @media (min-width: 1280px) {
    :root {
      --sidebar-width: 18rem;
      --content-max-width: 80rem;
    }
  }

  body {
    @apply bg-mist text-ink antialiased;
    /* Smooth scrolling & tap highlights */
    -webkit-tap-highlight-color: transparent;
  }

  /* Hide scrollbar on mobile for cleaner look */
  @media (max-width: 639px) {
    body {
      overflow-x: hidden;
    }
  }
}

/* ============================================
   RESPONSIVE COMPONENT UTILITIES
   ============================================ */
@layer components {

  /* Container with responsive max-width */
  .container-responsive {
    @apply w-full mx-auto px-4;
    max-width: var(--content-max-width);
  }

  @media (min-width: 640px) {
    .container-responsive {
      @apply px-6;
    }
  }

  @media (min-width: 1024px) {
    .container-responsive {
      @apply px-8;
    }
  }

  /* Glass card with responsive padding */
  .card-glass {
    @apply bg-white/55 backdrop-blur-glass border border-white/40 shadow-glass;
    padding: var(--card-padding);
    border-radius: var(--border-radius-card);
  }

  .card-glass-interactive {
    @apply card-glass transition-all duration-300 hover:shadow-glass-hover hover:bg-white/65 active:scale-[0.98] cursor-pointer;
  }

  /* Responsive glass inputs */
  .input-glass {
    @apply bg-white/50 backdrop-blur-sm border border-slate/20 rounded-xl px-4 py-3 text-ink placeholder:text-slate/60 focus:outline-none focus:ring-2 focus:ring-blue/20 focus:border-blue transition-all;
  }

  @media (min-width: 1024px) {
    .input-glass {
      @apply px-5 py-3.5;
    }
  }

  /* Responsive button sizes */
  .btn-primary {
    @apply bg-blue text-white font-medium px-6 py-3 rounded-xl shadow-lg shadow-blue/20 active:scale-95 transition-all hover:bg-blue-hover;
  }

  @media (min-width: 1024px) {
    .btn-primary {
      @apply px-8 py-3.5;
    }
  }

  .btn-glass {
    @apply bg-white/40 backdrop-blur-md border border-white/40 text-slate font-medium px-6 py-3 rounded-xl hover:bg-white/60 active:scale-95 transition-all;
  }

  /* Responsive grid layouts */
  .grid-responsive-cards {
    @apply grid grid-cols-1 gap-4;
  }

  @media (min-width: 640px) {
    .grid-responsive-cards {
      @apply grid-cols-2 gap-5;
    }
  }

  @media (min-width: 1024px) {
    .grid-responsive-cards {
      @apply grid-cols-3 gap-6;
    }
  }

  @media (min-width: 1280px) {
    .grid-responsive-cards {
      @apply grid-cols-4;
    }
  }

  /* Tablet sidebar navigation (sm to lg) */
  .sidebar-nav {
    @apply hidden sm:flex lg:hidden flex-col fixed left-0 top-0 h-full bg-white/70 backdrop-blur-xl border-r border-white/40 shadow-glass z-sticky;
    width: 14rem;
  }

  /* Mobile bottom dock (sm-) */
  .dock-nav {
    @apply sm:hidden fixed bottom-0 left-0 right-0 z-docked p-3;
  }

  /* Main content area with responsive margins */
  .main-content {
    @apply min-h-screen;
  }

  /* Mobile: space for bottom dock */
  @media (max-width: 639px) {
    .main-content {
      padding-bottom: 6rem;
    }
  }

  /* Tablet: offset for left sidebar */
  @media (min-width: 640px) and (max-width: 1023px) {
    .main-content {
      padding-left: 14rem;
      padding-bottom: 2rem;
    }
  }

  /* Responsive table wrapper */
  .table-responsive {
    @apply w-full overflow-x-auto;
    -webkit-overflow-scrolling: touch;
  }

  @media (min-width: 1024px) {
    .table-responsive {
      @apply overflow-visible;
    }
  }

  /* Touch-friendly targets for mobile */
  .touch-target {
    @apply min-h-[44px] min-w-[44px];
  }

  /* Responsive text utilities */
  .text-responsive-title {
    font-size: var(--text-2xl);
    @apply font-bold leading-tight;
  }

  @media (min-width: 640px) {
    .text-responsive-title {
      font-size: var(--text-3xl);
    }
  }

  .text-responsive-subtitle {
    font-size: var(--text-base);
    @apply text-slate;
  }

  @media (min-width: 640px) {
    .text-responsive-subtitle {
      font-size: var(--text-lg);
    }
  }

  /* Hover states only on devices that support it */
  @media (hover: hover) and (pointer: fine) {
    .hover-lift {
      @apply transition-transform duration-200;
    }

    .hover-lift:hover {
      @apply -translate-y-0.5;
    }
  }
}

/* ============================================
   ANIMATIONS
   ============================================ */
@layer utilities {

  /* Fade in animation */
  .animate-fade-in {
    animation: fadeIn 0.3s ease-out forwards;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(8px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Scale in animation for modals */
  .animate-scale-in {
    animation: scaleIn 0.25s ease-out forwards;
  }

  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }

    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Slide up animation for mobile sheets */
  .animate-slide-up {
    animation: slideUp 0.3s ease-out forwards;
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(100%);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Slide in from left for desktop sidebar */
  .animate-slide-in-left {
    animation: slideInLeft 0.3s ease-out forwards;
  }

  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-100%);
    }

    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
}

/* Custom Scrollbar for Mist theme */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  @apply bg-transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-slate/20 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-slate/40;
}

/* Desktop: wider scrollbar */
@media (min-width: 1024px) {
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
}